<!-- Page Header -->
<div class="flex items-center gap-4 bg-white p-4 rounded-xl shadow-sm border border-green-100 sticky top-0 z-40">
  <div
    class="w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-green-100 flex items-center justify-center shadow-inner flex-shrink-0">
    <img src="../../../assets/DairryFarmImg/fiscal_13495984.png" alt="Monthly Icon"
      class="w-6 h-6 sm:w-8 sm:h-8 object-contain" />
  </div>

  <div class="min-w-0">
    <h1 class="text-xl sm:text-2xl font-semibold text-green-900 truncate">Monthly Profit & Expense</h1>
    <p class="text-xs sm:text-sm text-green-600 -mt-0.5 truncate">View monthly profit and expense summary</p>
  </div>
</div>

<main class="min-h-screen bg-green-50 p-3 sm:p-4 md:p-6">
  <div class="max-w-7xl mx-auto space-y-4 sm:space-y-6">

    <!-- Loading -->
    <div *ngIf="isLoading" class="text-center py-8 sm:py-12">
      <div class="inline-block animate-spin rounded-full h-8 w-8 sm:h-10 sm:w-10 border-b-2 border-green-600"></div>
      <p class="text-sm text-green-600 mt-2">Loading monthly summary...</p>
    </div>

    <!-- Data -->
    <div *ngIf="!isLoading" class="space-y-4 sm:space-y-6">

      <!-- No Data -->
      <div *ngIf="monthlyData.length === 0"
        class="text-center py-8 sm:py-12 bg-white rounded-xl border border-green-100">

        <div
          class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 rounded-full bg-green-100 flex items-center justify-center">
          <i class="ri-pie-chart-line text-xl sm:text-2xl text-green-400"></i>
        </div>

        <h3 class="text-base sm:text-lg font-medium text-green-900 mb-1.5 sm:mb-2">
          No Monthly Data Found
        </h3>

        <p class="text-xs sm:text-sm text-green-600 px-4">
          Start adding bills and expenses to see your monthly summary here.
        </p>
      </div>

      <!-- Month Cards -->
      <div *ngFor="let month of monthlyData; let i = index"
        class="bg-white border border-green-100 rounded-xl p-4 sm:p-5 shadow-sm hover:shadow-md transition-shadow">

        <!-- Header -->
        <div class="flex items-center justify-between mb-3 sm:mb-4">
          <div class="flex items-center gap-2">
            <div class="w-3 h-3 rounded-full bg-green-500"></div>
            <h5 class="text-base sm:text-lg font-semibold text-green-900">
              {{ month.displayMonth }}
            </h5>
          </div>

          <!-- Profit Badge -->
          <span
            class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold"
            [style.backgroundColor]="month.profit >= 0 ? '#dcfce7' : '#fee2e2'"
            [style.color]="month.profit >= 0 ? '#166534' : '#991b1b'">
            {{ month.profit >= 0 ? 'Profit' : 'Loss' }}
          </span>
        </div>

        <!-- Values -->
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm">

          <!-- Profit -->
          <div class="flex justify-between sm:flex-col sm:items-start">
            <span class="text-green-700">Profit</span>
            <span class="font-semibold"
              [style.color]="month.profitColor">
              {{ formatCurrency(month.profit) }}
            </span>
          </div>

          <!-- Bill -->
          <div class="flex justify-between sm:flex-col sm:items-start">
            <span class="text-green-700">Bill</span>
            <span class="font-semibold text-green-700">
              {{ formatCurrency(month.totalBill) }}
            </span>
          </div>

          <!-- Expense -->
          <div class="flex justify-between sm:flex-col sm:items-start">
            <span class="text-green-700">Expense</span>
            <span class="font-semibold text-red-600">
              {{ formatCurrency(month.totalExpense) }}
            </span>
          </div>

        </div>

      </div>

    </div>

  </div>
</main>
